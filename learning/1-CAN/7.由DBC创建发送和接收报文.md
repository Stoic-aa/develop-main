# 由DCB创建发送和接收报文

## 目录



## 1.简述
基于CAN-STACK,上次我手动进行了一条发送和接收报文的配置,配置过程有些繁琐,且容易出错,正常的在工作中是采用更高效的配置方式进行报文的新增和配置,我们只用解决配置过程中的相关错误和进行报文的校对即可

## 2.主要的过程
这次学习的主要的操作是如何在DBC的文件中新增一条发送和接收的报文,并加载到工程文件中,并通过达芬奇工具生成CAN-STACK中你的报文新增的相关配置代码,完成接收和发送报文的配置W

## 3. 过程记录

1. 打开DCB文件, 之前已经操作DBC的文件,并弄清楚了DBC文件的相关内容,这里直接打开之前的输入DCB文件:

    ![alt text](./picture/open_can_dbc.png)

2. 在 message 中添加新的报文,先加一条发送报文,再加一条接收报文,并编辑 基本信息(name,ID),发送节点选择(tranmitter),message的属性设置(attribute)(周期,周期时间设置),这里还没有进行 signal 的添加, 因为我们的signal还没有配置

    **发送报文**
    ![alt text](./picture/dbc_add_message_1.png)
    ![alt text](./picture/dbc_add_message_2.png)
    ![alt text](./picture/dbc_add_message_3.png)
    **接收报文**
    ![alt text](./picture/dbc_add_message_4.png)
    ![alt text](./picture/dbc_add_message_5.png)
    ![alt text](./picture/dbc_add_message_6.png)

3. 创建发送和接收的 signal ,实际的信号:

    **发送信号**
    ![alt text](./picture/dbc_add_signal_1.png)
    ![alt text](./picture/dbc_add_signal_2.png)
    ![alt text](./picture/dbc_add_signal_3.png)

    **对发送信号的节点进行配置**
    ![alt text](./picture/dbc_add_signal_4.png)
    ![alt text](./picture/dbc_add_signal_5.png)

    **接收信号配置**
    ![alt text](./picture/dbc_add_signal_6.png)
    ![alt text](./picture/dbc_add_signal_7.png)
    ![alt text](./picture/dbc_add_signal_8.png)
    可以调整内布局,再Layout中进行拖拽调节 Left 的信号到最后一个字节(8bit)
    ![alt text](./picture/dbc_add_signal_9.png)

    **对接收节点的配置**
    ![alt text](./picture/dbc_add_signal_15.png)

    **对发送signal进行真值表的建立**
    ![alt text](./picture/dbc_add_signal_10.png)
    ![alt text](./picture/dbc_add_signal_11.png)
    ![alt text](./picture/dbc_add_signal_12.png)
    ![alt text](./picture/dbc_add_signal_13.png)
    ![alt text](./picture/dbc_add_signal_14.png)



    

